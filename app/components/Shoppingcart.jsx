"use client";

import React from "react";
import Link from "next/link";
import { useCart } from "../store/cartContext"; // Adjust the path as necessary

export default function ShopCart() {
    const { cart } = useCart();

    // Compute the total number of items in the cart
    const totalItems = Object.values(cart).reduce(
        (total, currentQuantity) => total + currentQuantity,
        0
    );

    return (
        <Link href="/shop/checkout">
            <div className="relative">
                <div className="absolute right-[-12px] top-[-8px] grid h-5 w-5 place-content-center rounded-full border border-clrprimary bg-clrwhite text-xs text-clrprimarydark">
                    {totalItems > 99 ? "99+" : totalItems}{" "}
                    {/* Display total items, maxing out at "99+" */}
                </div>
                <svg
                    width="26"
                    height="24"
                    viewBox="0 0 26 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                        d="M0.286133 0.857143C0.286133 0.629814 0.376439 0.411797 0.537184 0.251051C0.69793 0.090306 0.915947 0 1.14328 0H3.7147C3.9059 5.28197e-05 4.09159 0.0640297 4.24224 0.181757C4.3929 0.299484 4.49986 0.464201 4.54613 0.649714L5.24042 3.42857H25.1433C25.2735 3.42861 25.402 3.4583 25.519 3.51541C25.636 3.57251 25.7384 3.65551 25.8186 3.75813C25.8987 3.86074 25.9544 3.98026 25.9815 4.10761C26.0085 4.23497 26.0062 4.36681 25.9747 4.49314L23.4033 14.7789C23.357 14.9644 23.25 15.1291 23.0994 15.2468C22.9487 15.3645 22.763 15.4285 22.5718 15.4286H7.14328C6.95208 15.4285 6.76639 15.3645 6.61574 15.2468C6.46508 15.1291 6.35812 14.9644 6.31185 14.7789L3.04613 1.71429H1.14328C0.915947 1.71429 0.69793 1.62398 0.537184 1.46323C0.376439 1.30249 0.286133 1.08447 0.286133 0.857143ZM5.42899 20.5714C5.42899 19.6621 5.79021 18.79 6.4332 18.1471C7.07618 17.5041 7.94825 17.1429 8.85756 17.1429C9.76687 17.1429 10.6389 17.5041 11.2819 18.1471C11.9249 18.79 12.2861 19.6621 12.2861 20.5714C12.2861 21.4807 11.9249 22.3528 11.2819 22.9958C10.6389 23.6388 9.76687 24 8.85756 24C7.94825 24 7.07618 23.6388 6.4332 22.9958C5.79021 22.3528 5.42899 21.4807 5.42899 20.5714ZM17.429 20.5714C17.429 19.6621 17.7902 18.79 18.4332 18.1471C19.0762 17.5041 19.9482 17.1429 20.8576 17.1429C21.7669 17.1429 22.6389 17.5041 23.2819 18.1471C23.9249 18.79 24.2861 19.6621 24.2861 20.5714C24.2861 21.4807 23.9249 22.3528 23.2819 22.9958C22.6389 23.6388 21.7669 24 20.8576 24C19.9482 24 19.0762 23.6388 18.4332 22.9958C17.7902 22.3528 17.429 21.4807 17.429 20.5714Z"
                        fill="#FAFAFA"
                    />
                </svg>
            </div>
        </Link>
    );
}
